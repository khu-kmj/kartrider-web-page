<html>
    <head>
        <title>전적 검색</title>
        <meta charset="utf-8">
        <!-- 제이쿼리 불러오기 -->
        <!--<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>-->
        <link rel="stylesheet" type="text/css" href="search_home.css" />
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
 
    </head>
    <body>
        <img class="box" id="left" src="metadata/image/wodi.png">
        <img class="box2" id="right" src="metadata/image/sdao.png">
        <div class="search" id="a">
            <input type="text" id="name" placeholder="카트라이더 닉네임 입력" />
            <button id="OK"></button>
        </div>
        <script>
            $("#OK").click(function(){      // OK 버튼 클릭하면
                $.ajax({
                    url: '/search',       // postTest 주소로
                    async: true,            // 동기화 - 서버에서 반응이 올때까지 기다림
                    type: 'POST',           // POST 방식으로
                    data: {
                        test: $("#name").val()  // 텍스트필드에 입력한 값을 test라는 이름으로 보냄
                    },
                    dataType: 'json',
                    success: function(data){
                        if(data=="200"){
                            const div_target=document.querySelector('#a');
                            var obj=document.createElement('img');
                            obj.id="loading";
                            obj.src='metadata/image/loading.gif';
                            div_target.append(obj);
                            window.location.href="/search/result";
                        }
                        else{
                            swal("ERROR", "존재하지 않는 닉네임입니다.");
                        }
                    }
                }); 
            });
        </script>
    </body>
</html>